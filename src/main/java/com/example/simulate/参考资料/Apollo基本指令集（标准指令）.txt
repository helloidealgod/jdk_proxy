14 13 12 11 10 09 08 07 06 05 04 03 02 01 00
┌───┬───────────────────┬───────────────────┐
│OP │ 寄存器/特殊码     │ 内存地址/数据     │
└───┴───────────────────┴───────────────────┘
 3位       3位                  9位

标准指令格式（3-3-9）
14 13 12 11 10 09 08 07 06 05 04 03 02 01 00
┌───┬───────┬───────────────────────────────┐
│OP │ 寄存器 │           内存地址            │
└───┴───────┴───────────────────────────────┘
扩展指令格式：
14 13 12 11 10 09 08 07 06 05 04 03 02 01 00
┌───────┬───────────────────────────────────┐
│ 操作码 │             操作数                │
└───────┴───────────────────────────────────┘
   5位                   10位

基本指令集（标准指令）
1. 传输指令
助记符	  八进制码		二进制码 (OP,REG,ADDR)	功能描述
TC		  0000-0777	000 XXX XXXXXXXX		转移控制（跳转/调用）
CCS	  1000-1777	001 XXX XXXXXXXX		计数、比较和跳转
INDEX   2000-2777	010 XXX XXXXXXXX		变址修改下一条指令
RESUME  3000		011 000 000000			中断返回（专用地址）
XCH	  4000-4777	100 XXX XXXXXXXX		交换（加载/存储）
CS		  5000-5777	101 XXX XXXXXXXX		清除并减法（加载负数）
TS		  6000-6777	110 XXX XXXXXXXX		带溢出的传输
AD		  7000-7777	111 XXX XXXXXXXX		加法

寄存器编码（XXX字段）在XCH、CS、TS、AD指令中，XXX字段指定寄存器：
XXX	八进制	寄存器
000	00	A（累加器）
001	01	L（下位乘积）
010	02	Q（返回地址）
011	03	EB（扩展B）
100	04	FB（固定B）
101	05	Z（程序计数器）
110	06	BB（备用B）
111	07	未使用/特殊

扩展指令（使用EXTEND前缀）
扩展指令通过EXTEND指令（代码00006）启用，然后执行下一字的扩展操作码。

EXTEND指令序列格式：
EXTEND   ; 代码00006
[扩展指令] ; 执行扩展操作

扩展指令集：
助记符	八进制码	功能描述
SU		1XXXX	减法
MP		2XXXX	乘法
DV		3XXXX	除法
BZF		4XXXX	为零跳转
MSU		5XXXX	带符号乘法
QXCH	6XXXX	与Q交换
AUG		7XXXX	增量
DIM		1XXXX（特定）	减量
DCA		2XXXX（特定）	双清存储
DCS		3XXXX（特定）	双清减法

4. 移位指令
移位指令也是扩展指令，操作码在地址字段：
助记符	八进制码	功能描述
MASK	0000X	掩码（逻辑与）
MP		0001X	乘法（已列出）
DV		0002X	除法（已列出）
SU		0003X	减法（已列出）
BHIZ	0004X	高为零跳转
BOV		0005X	溢出跳转
CXCH	0006X	与C交换
CA		0007X	清加
CS		0010X	清除减（已列出）
TS		0011X	传输存储（已列出）
XCH		0012X	交换（已列出）
AD		0013X	加法（已列出）
OVSK	0014X	溢出跳转
TC		0015X	转移控制（已列出）
CCS		0016X	计数比较跳转（已列出

5. 特殊指令和伪指令
助记符	类型	功能描述
EXTEND	基本指令	扩展指令前缀（代码00006）
INCR	伪操作	增量（汇编器生成AUG指令）
DECR	伪操作	减量（汇编器生成DIM指令）
DOUBLE	扩展	双倍（左移一位）
COM	扩展	取补码
INDEX	基本	变址寻址
RESUME	基本	中断返回（固定地址3000）
RELINT	I/O	开中断
INHINT	I/O	关中断

6. I/O指令
I/O指令通过特定的内存地址访问：
助记符	地址范围（八进制）	功能
READ	00000-00017	读取输入通道
WRITE	00020-00037	写入输出通道
DISPLAY	00040-00057	显示输出
KEYIN	00060-00077	键盘输入

7. 中断向量地址
地址（八进制）	用途
00000	重启
00004	掉电恢复
00010	优先级1中断
00014	优先级2中断
00020	优先级3中断
00024	优先级4中断
00030	优先级5中断
00034	优先级6中断
00040	优先级7中断

9. 完整的指令编码表（精简版）
OP码		八进制范围	指令类型	主要指令
000		0000-0777	跳转/控制	TC
001		1000-1777	条件分支	CCS
010		2000-2777	寻址修改	INDEX
011		3000-3777	中断/特殊	RESUME等
100		4000-4777	数据传输	XCH
101		5000-5777	加载负值	CS
110		6000-6777	传输存储	TS
111		7000-7777	算术运算	AD

10. 重要注意事项
地址空间：
基本地址空间：2K字（0-7777八进制）
通过BANK寄存器扩展：共36K字（可寻址）

数据格式：
15位数据 + 1位符号 + 1位奇偶 = 17位物理字
数值范围：-1 ≤ x < +1（分数表示）

特殊寻址模式：
INDEX指令修改下一条指令的地址字段
子程序返回：TC Q（使用Q寄存器）

溢出处理：
OVSK：溢出跳过下一条指令
TS指令：检测并存储溢出

11. 完整指令列表参考（按功能分组）
控制流指令：
TC, CCS, BZF, BHIZ, BOV, OVSK
算术指令：
AD, SU, MP, DV, MSU, AUG, DIM, DOUBLE
数据传输：
XCH, CS, TS, CA, CXCH, QXCH, DCA, DCS
逻辑操作：
MASK, COM
系统指令：
EXTEND, RESUME, RELINT, INHINT, INCR, DECR
寻址指令：
INDEX



1 指令机器：SUBLEQ（Subtract and branch if less than or equal to zero）
指令形式：
text
SUBLEQ a, b, c
Mem[b] = Mem[b] - Mem[a]
如果结果 ≤ 0，则 PC = C，否则 PC = PC + 3（假设每条指令占 3 个地址单元）
如果结果 ≤ 0，则跳转到地址 c，否则执行下一条指令。
用这条指令可以模拟加载、存储、加法、跳转等所有操作。


4 指令机器：比如只有 LD（加载）、ST（存储）、BZ（为零跳转）、ADD（加法），再加上隐含的停机操作，可能就足够模拟其它运算

LC-3（Little Computer 3） 是一个用于教学目的的 16 位计算机架构，其指令集简洁规整，15 条指令 具体如下：

1. 运算指令（3 条）
指令      名称      功能
ADD     加法      Rd = Rs1 + Rs2 或 Rd = Rs1 + imm5（符号扩展立即数）
AND     逻辑与     Rd = Rs1 & Rs2 或 Rd = Rs1 & imm5
NOT     按位取反    Rd = ~Rs（只有寄存器版本）
2. 数据移动指令（3 条）
指令      名称      功能
LD      加载（PC 相对）       Rd = Mem[PC + offset9]
LDI     间接加载    Rd = Mem[Mem[PC + offset9]]（两次访存）
LDR     基址+偏移加载 Rd = Mem[BaseR + offset6]
3. 存储指令（3 条）
指令      名称      功能
ST      存储（PC 相对）       Mem[PC + offset9] = Rs
STI     间接存储    Mem[Mem[PC + offset9]] = Rs
STR     基址+偏移存储 Mem[BaseR + offset6] = Rs
4. 控制流指令（5 条）
指令      名称      功能
BR      条件分支    根据条件码（N、Z、P）跳转到 PC + offset9
JMP     跳转（寄存器） PC = BaseR（用于子程序返回）
JSR     跳转到子程序（PC 相对）   R7 = PC，PC = PC + offset11
JSRR    跳转到子程序（寄存器）     R7 = PC，PC = BaseR
TRAP    系统调用/陷阱 调用操作系统例程，PC = Mem[trapvect8]，R7 = PC（用于 I/O 等）
5. 其他指令（1 条）
指令      名称      功能
RET     从子程序返回  实际是 JMP R7 的特殊形式（操作码同 JMP，BaseR = R7）
注：RET 在 LC-3 中是一个伪指令（汇编助记符），对应机器码就是 JMP R7，因此有些资料会将其与 JMP 合并，仍算 15 条，有些则分开算 16 条，但教材标准一般是 15 条（不单独计 RET）。

指令编码格式
LC-3 指令统一为 16 位，前 4 位是操作码（opcode），共支持 2^4 = 16 种操作，但 1101 未被使用（保留），所以只有 15 条有效指令。